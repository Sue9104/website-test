{"version":3,"sources":["webpack:///resources/assets/js/components/backStage/projectList/AllocationList.vue","webpack:///./resources/assets/js/components/backStage/projectList/AllocationList.vue","webpack:///./resources/assets/js/components/backStage/projectList/AllocationList.vue?7748","webpack:///./resources/assets/js/components/backStage/projectList/AllocationList.vue?5511","webpack:///./resources/assets/js/components/backStage/projectList/AllocationList.vue?5b19"],"names":["__webpack_exports__","mounted","_this","this","searchForm","product_name","$route","query","name","loading","Promise","resolve","reject","$http","post","then","response","userList","data","qs","stringify","product_id","id","status","forEach","item","$set","length","JSON","parse","translate_users","item1","item2","translators","push","allocationListTable","total","key","searchFlag","rules","multipleSelection","currentPage","pageSize","dialogVisible","batch_translate_users_name","methods","onSearch","_this2","page","count","allAllocation","visibleSelect","row","document","getElementById","style","border","submit","_this3","translate_users_name","submitObj","translate_in_id","setTimeout","$store","state","taskList","Unassigned_nums","handleCurrentChange","$notify","title","message","type","selectable","index","batchSubmitOpen","batchSubmit","_this4","IDS","$","each","i","ele","handleSelectionChange","val","handleSizeChange","size","_this5","catch","err","Component","__webpack_require__","normalizeComponent","ssrContext","module","exports","content","locals","render","_vm","_h","$createElement","_c","_self","attrs","separator-class","_v","staticClass","ref","inline","model","label-position","label","placeholder","value","callback","$$v","trim","expression","clearable","on","click","directives","rawName","staticStyle","width","stripe","max-height","selection-change","align","scopedSlots","_u","fn","scope","padding-left","_l","translate","margin","padding","border-bottom","_s","prop","visible-change","$event","undefined","_e","color","background","current-page","page-sizes","page-size","layout","current-change","size-change","visible","top","update:visible","center","slot","staticRenderFns"],"mappings":"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","file":"js/lazy/11.js","sourcesContent":["<template>\r\n  <div id=\"missionListMain\">\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item>Assignment</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <div class=\"addSearch clearfix\">\r\n      <div id=\"searchCon\">\r\n        <el-form :inline=\"true\" :model=\"searchForm\" ref=\"searchForm\" :rules=\"rules\" label-position=\"left\" class=\"demo-form-inline\" size=\"small\">\r\n          <el-form-item label=\"Project Name:\">\r\n            <div class=\"searchInp\">\r\n              <el-input v-model.trim=\"searchForm.product_name\" placeholder=\"plese enter project name\"></el-input>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item label=\"Keywords:\">\r\n            <div class=\"searchInp\">\r\n              <el-input v-model.trim=\"searchForm.key\" placeholder=\"plese enter keyword\"></el-input>\r\n            </div>\r\n          </el-form-item>\r\n          <el-form-item label=\"Status:\">\r\n            <el-select v-model.trim=\"searchForm.status\" clearable placeholder=\"please select status\">        \r\n              <el-option label=\"Unassigned\" value=\"Unassigned\"></el-option>\r\n              <el-option label=\"Untranslated\" value=\"Untranslated\"></el-option>\r\n              <el-option label=\"Unreviewed\" value=\"Unreviewed\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" class=\"searchBtn\" @click=\"onSearch\">\r\n              <i class=\"el-icon-search\">Search</i></el-button>\r\n            <!--<el-button type=\"primary\" class=\"searchBtn\" title=\"Assign all current entries with status 'Unassigned' in the following table\" @click=\"allAllocation\">\r\n                <i class=\"el-icon-upload\">Allocate all</i></el-button>-->\r\n            </el-form-item>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n    </div>\r\n    <div class=\"showTransList\">\r\n     <el-table ref=\"allocationTable\" :data=\"allocationListTable\" v-loading=\"loading\" stripe border style=\"width: 100%\" max-height=\"560\" @selection-change=\"handleSelectionChange\">\r\n        <el-table-column type=\"selection\" width=\"35\" align=\"center\" :selectable=\"selectable\">\r\n        </el-table-column>\r\n        <el-table-column label=\"Source\" align=\"center\" type=\"expand\" width=\"75\">\r\n          <template slot-scope=\"scope\">\r\n            <ol style=\"padding-left: 20px;\">\r\n              <li v-for=\"(item,index) in JSON.parse(scope.row.translate)\" :key=\"index\" style=\"margin:10px 0;padding:5px 0;border-bottom:1px dashed #ccc;\">{{item}}</li>\r\n            </ol>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"product\" label=\"Project Name\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"key\" label=\"Keywords\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"lang\" label=\"Language\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"status\" label=\"Status\" align=\"center\">\r\n        </el-table-column>\r\n        <el-table-column label=\"Translator\" align=\"center\">\r\n          <template slot-scope=\"scope\" v-if=\"scope.row.status==='Unassigned'\">\r\n            <el-select v-model=\"scope.row.translate_users_name\" :id=\"'selectTranslator'+scope.row.id\" placeholder=\"required\" @visible-change=\"visibleSelect(scope.row)\">\r\n              <el-option v-for=\"(item,index) in translators\" :key=\"index\" :label=\"item.name\" :value=\"item.name\"></el-option>\r\n            </el-select>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"Operation\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"medium\" title=\"submit\" @click=\"submit(scope.row)\" v-if=\"scope.row.status==='Unassigned'\">Assign</el-button>\r\n            <!--<el-button type=\"text\" size=\"medium\" title=\"remove\" @click=\"deleteCurrent(scope.row)\" icon=\"el-icon-delete\">Delete</el-button>-->\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div id=\"batchSelected\">\r\n        {{multipleSelection.length}} {{multipleSelection.length>1?'entries':'entry'}} selected\r\n        <el-button type=\"text\" style=\"color:rgb(255, 208, 75);\" @click=\"batchSubmitOpen\">Bulk Allocation</el-button>\r\n      </div>\r\n      <el-pagination background  @current-change=\"handleCurrentChange\" :current-page=\"currentPage\" @size-change=\"handleSizeChange\" :page-sizes=\"[10, 20, 50, 100, 200]\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n      <el-dialog\r\n      title=\"Confirm\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"20%\" top=\"40vh\">\r\n        <div id=\"batchModal\">\r\n          <el-select center v-model=\"batch_translate_users_name\" placeholder=\"please select translator\">\r\n            <el-option v-for=\"(item,index) in translators\" :key=\"index\" :label=\"item.name\" :value=\"item.name\"></el-option>\r\n          </el-select>\r\n        </div>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"dialogVisible = false\">Cancel</el-button>\r\n          <el-button type=\"primary\" @click=\"batchSubmit\">OK</el-button>\r\n        </span>\r\n      </el-dialog>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  mounted() {\r\n    this.searchForm.product_name = this.$route.query.name||''\r\n\r\n    this.loading = true\r\n    new Promise((resolve,reject)=>{\r\n      this.$http.post(\"/api/user/list\").then(response=>{\r\n        // console.log(response.data);\r\n        this.userList=response.data.data;\r\n        resolve()\r\n      })\r\n    }).then(()=>{\r\n      // this.onSearch()\r\n      this.$http.post(\"/api/translate/list\",qs.stringify({product_id:this.$route.query.id||'',status:'Unassigned'})).then(response=>{\r\n        response.data.data.forEach(item=>{\r\n          this.$set(item,'translate_users_name',\"\")\r\n        })\r\n        if(response.data.data.length>0){\r\n          JSON.parse(response.data.data[0].translate_users).forEach(item1=>{\r\n            this.userList.forEach(item2=>{\r\n              if(item1===item2.id){\r\n                this.translators.push(item2)\r\n                return false;\r\n              }\r\n            })\r\n          })\r\n        }\r\n        \r\n        // console.log(this.translators);\r\n        this.allocationListTable = response.data.data\r\n        this.total = response.data.total\r\n        this.loading = false\r\n      })\r\n    })\r\n    \r\n  },\r\n  data() {\r\n    return {\r\n      loading:false, \r\n      searchForm: {\r\n        product_name:'',\r\n        key: '',\r\n        status:'Unassigned',\r\n      },\r\n      searchFlag:false,\r\n      userList:[],\r\n      rules: {},\r\n      translators: [],\r\n      allocationListTable: [],\r\n      total:0,\r\n      multipleSelection: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      dialogVisible: false,\r\n      batch_translate_users_name:''\r\n    }\r\n  },\r\n  methods: {\r\n    onSearch() {\r\n      this.loading = true\r\n      this.currentPage = 1\r\n      this.searchForm.product_name===''&&this.searchForm.key===''&&this.searchForm.status===''?this.searchFlag = false:this.searchFlag = true\r\n      this.$http.post(\"/api/translate/list\",qs.stringify({product_id:this.$route.query.id||'',product_name:this.searchForm.product_name,key:this.searchForm.key,status:this.searchForm.status,page:this.currentPage,count:this.pageSize})).then(response=>{\r\n        // console.log(response.data);\r\n        response.data.data.forEach(item=>{\r\n          this.$set(item,'translate_users_name',\"\")\r\n        })\r\n        this.allocationListTable = response.data.data;\r\n        this.total = response.data.total;\r\n        this.loading = false\r\n      })\r\n    },\r\n    allAllocation(){\r\n\r\n    },\r\n    visibleSelect(row){\r\n      document.getElementById(\"selectTranslator\"+row.id).style.border = \"1px solid #DCDFE6\";\r\n    },\r\n    submit(row) {\r\n      // console.log(row)\r\n      if (row.translate_users_name) {\r\n        document.getElementById(\"selectTranslator\"+row.id).style.border = \"1px solid #DCDFE6\";\r\n        let submitObj = {};\r\n        submitObj.translate_in_id = JSON.stringify([row.id]);\r\n        submitObj.translate_users_name = row.translate_users_name;\r\n        // console.log(submitObj);\r\n        this.$http\r\n          .post(\r\n            '/api/translate/assign',\r\n            qs.stringify(submitObj)\r\n          )\r\n          .then(response => {\r\n            setTimeout(()=>{\r\n              this.$store.state.taskList.Unassigned_nums -= 1\r\n              this.handleCurrentChange(this.currentPage);\r\n            },1000)\r\n          })\r\n      } else {\r\n        document.getElementById(\"selectTranslator\"+row.id).style.border = \"1px solid #f00\";\r\n        this.$notify({\r\n          title: 'Notice',\r\n          message: 'Translator are required.',\r\n          type: 'error'\r\n        })\r\n      }\r\n    },\r\n    selectable(row,index){\r\n      return row.status==='Unassigned'\r\n    },\r\n    batchSubmitOpen(){\r\n      if(this.multipleSelection.length===0){\r\n        this.$notify({\r\n          title: 'notice',\r\n          message: 'No entries to select for operation.',\r\n          type: 'warning'\r\n        })\r\n        return false;\r\n      }\r\n      this.dialogVisible = true;\r\n    },\r\n    batchSubmit(){\r\n      let IDS = [];\r\n      $.each(this.multipleSelection, function(i, ele) {\r\n        IDS.push(ele.id)\r\n      })\r\n      if (this.batch_translate_users_name) {\r\n        let submitObj = {};\r\n        submitObj.translate_in_id = JSON.stringify(IDS);\r\n        submitObj.translate_users_name = this.batch_translate_users_name;\r\n        // console.log(submitObj);\r\n        this.$http\r\n          .post(\r\n            '/api/translate/assign',\r\n            qs.stringify(submitObj)\r\n          )\r\n          .then(response => {\r\n            setTimeout(()=>{\r\n              this.$store.state.taskList.Unassigned_nums -= IDS.length\r\n              this.batch_translate_users_name = '';\r\n              this.dialogVisible = false;\r\n              this.handleCurrentChange(this.currentPage);\r\n            },1000)\r\n          })\r\n      } else {\r\n        this.$notify({\r\n          title: 'Notice',\r\n          message: 'Translator and priority are required.',\r\n          type: 'error'\r\n        })\r\n      }\r\n    },\r\n    // deleteCurrent(row) {\r\n      // this.$http\r\n      //   .post(\r\n      //     '/php/allocation_list/VD6_remove.php',\r\n      //     qs.stringify({\r\n      //       ID: [row.ID],\r\n      //     })\r\n      //   )\r\n      //   .then(response => {\r\n      //     this.$notify({\r\n      //       title: 'Success',\r\n      //       message: 'Entry' + row.ID + 'was successfully deleted from the allocation list and can be viewed in the translation list.',\r\n      //       type: 'success'\r\n      //     })\r\n      //     setTimeout(()=>{\r\n      //       this.onSearch();\r\n      //     },1000)\r\n      //   })\r\n    // },\r\n    // deleteSelected() {\r\n    //   let IDS = []\r\n    //   if(this.multipleSelection.length===0){\r\n    //     this.$notify({\r\n    //       title: 'Notice',\r\n    //       message: 'No entries to delete are selected.',\r\n    //       type: 'warning'\r\n    //     })\r\n    //     return false;\r\n    //   }\r\n    //   $.each(this.multipleSelection, function(i, ele) {\r\n    //     IDS.push(ele.ID)\r\n    //   })\r\n      // this.$http\r\n      //   .post(\r\n      //     '/php/allocation_list/VD6_remove.php',\r\n      //     qs.stringify({\r\n      //       ID: IDS,\r\n      //     })\r\n      //   )\r\n      //   .then(response => {\r\n      //     this.$notify({\r\n      //       title: 'Success',\r\n      //       message: 'Entry' + IDS + 'were successfully deleted from the allocation list and can be viewed in the translation list.',\r\n      //       type: 'success'\r\n      //     })\r\n        //   setTimeout(()=>{\r\n        //     this.onSearch();\r\n        //   },1000)\r\n        // })\r\n    // },\r\n    handleSelectionChange(val) {\r\n      this.multipleSelection = val\r\n    },\r\n    handleSizeChange(size){\r\n      this.pageSize = size\r\n      this.currentPage = 1\r\n      this.handleCurrentChange(this.currentPage)\r\n    },\r\n    handleCurrentChange(val) {\r\n      // console.log(`当前页: ${val}`)\r\n      // console.log(this.currentPage)\r\n      this.currentPage = val\r\n      // this.currentPageTable = this.missionListTable.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize);\r\n      this.loading = true\r\n      if(this.searchFlag){\r\n        this.$http.post(\"/api/translate/list\",qs.stringify({product_id:this.$route.query.id||'',product_name:this.searchForm.product_name,key:this.searchForm.key,status:this.searchForm.status,page:this.currentPage,count:this.pageSize})).then(response=>{\r\n          // console.log(response.data);\r\n          response.data.data.forEach(item=>{\r\n          this.$set(item,'translate_users_name',\"\")\r\n        })\r\n          this.allocationListTable = response.data.data;\r\n          this.total = response.data.total;\r\n          this.loading = false\r\n        }).catch((err)=>{\r\n          throw err;\r\n        })\r\n      }else{\r\n        this.$http.post(\"/api/translate/list\",qs.stringify({product_id:this.$route.query.id||'',page:this.currentPage,count:this.pageSize})).then(response=>{\r\n          // console.log(response.data);\r\n          response.data.data.forEach(item=>{\r\n          this.$set(item,'translate_users_name',\"\")\r\n        })\r\n          this.allocationListTable = response.data.data;\r\n          this.total = response.data.total;\r\n          this.loading = false\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang='less' scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// resources/assets/js/components/backStage/projectList/AllocationList.vue","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b1898074\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!less-loader!../../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AllocationList.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = require(\"!!babel-loader?{\\\"cacheDirectory\\\":true,\\\"presets\\\":[[\\\"env\\\",{\\\"modules\\\":false,\\\"targets\\\":{\\\"browsers\\\":[\\\"> 2%\\\"],\\\"uglify\\\":true}}]],\\\"plugins\\\":[\\\"transform-object-rest-spread\\\",[\\\"transform-runtime\\\",{\\\"polyfill\\\":false,\\\"helpers\\\":false}],\\\"syntax-dynamic-import\\\",[\\\"import\\\",{\\\"libraryName\\\":\\\"iview\\\",\\\"libraryDirectory\\\":\\\"src/components\\\"}]]}!../../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AllocationList.vue\")\n/* template */\nvar __vue_template__ = require(\"!!../../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b1898074\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AllocationList.vue\")\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b1898074\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/assets/js/components/backStage/projectList/AllocationList.vue\n// module id = MHEw\n// module chunks = 11","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../node_modules/css-loader/index.js?minimize!../../../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b1898074\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":true}!../../../../../../node_modules/less-loader/dist/cjs.js!../../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./AllocationList.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"7b8b00bc\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-b1898074\",\"scoped\":true,\"hasInlineConfig\":true}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./resources/assets/js/components/backStage/projectList/AllocationList.vue\n// module id = Moqb\n// module chunks = 11","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-b1898074\",\"scoped\":true,\"hasInlineConfig\":true}!./node_modules/less-loader/dist/cjs.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./resources/assets/js/components/backStage/projectList/AllocationList.vue\n// module id = jvix\n// module chunks = 11","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"missionListMain\"}},[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',[_vm._v(\"Assignment\")])],1),_vm._v(\" \"),_c('div',{staticClass:\"addSearch clearfix\"},[_c('div',{attrs:{\"id\":\"searchCon\"}},[_c('el-form',{ref:\"searchForm\",staticClass:\"demo-form-inline\",attrs:{\"inline\":true,\"model\":_vm.searchForm,\"rules\":_vm.rules,\"label-position\":\"left\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"Project Name:\"}},[_c('div',{staticClass:\"searchInp\"},[_c('el-input',{attrs:{\"placeholder\":\"plese enter project name\"},model:{value:(_vm.searchForm.product_name),callback:function ($$v) {_vm.$set(_vm.searchForm, \"product_name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchForm.product_name\"}})],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Keywords:\"}},[_c('div',{staticClass:\"searchInp\"},[_c('el-input',{attrs:{\"placeholder\":\"plese enter keyword\"},model:{value:(_vm.searchForm.key),callback:function ($$v) {_vm.$set(_vm.searchForm, \"key\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchForm.key\"}})],1)]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"Status:\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"please select status\"},model:{value:(_vm.searchForm.status),callback:function ($$v) {_vm.$set(_vm.searchForm, \"status\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchForm.status\"}},[_c('el-option',{attrs:{\"label\":\"Unassigned\",\"value\":\"Unassigned\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Untranslated\",\"value\":\"Untranslated\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"Unreviewed\",\"value\":\"Unreviewed\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{staticClass:\"searchBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSearch}},[_c('i',{staticClass:\"el-icon-search\"},[_vm._v(\"Search\")])])],1)],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"showTransList\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],ref:\"allocationTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.allocationListTable,\"stripe\":\"\",\"border\":\"\",\"max-height\":\"560\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"35\",\"align\":\"center\",\"selectable\":_vm.selectable}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Source\",\"align\":\"center\",\"type\":\"expand\",\"width\":\"75\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('ol',{staticStyle:{\"padding-left\":\"20px\"}},_vm._l((JSON.parse(scope.row.translate)),function(item,index){return _c('li',{key:index,staticStyle:{\"margin\":\"10px 0\",\"padding\":\"5px 0\",\"border-bottom\":\"1px dashed #ccc\"}},[_vm._v(_vm._s(item))])}))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"product\",\"label\":\"Project Name\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"key\",\"label\":\"Keywords\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"lang\",\"label\":\"Language\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"Status\",\"align\":\"center\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Translator\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return scope.row.status==='Unassigned'?[_c('el-select',{attrs:{\"id\":'selectTranslator'+scope.row.id,\"placeholder\":\"required\"},on:{\"visible-change\":function($event){_vm.visibleSelect(scope.row)}},model:{value:(scope.row.translate_users_name),callback:function ($$v) {_vm.$set(scope.row, \"translate_users_name\", $$v)},expression:\"scope.row.translate_users_name\"}},_vm._l((_vm.translators),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.name}})}))]:undefined}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"Operation\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status==='Unassigned')?_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"medium\",\"title\":\"submit\"},on:{\"click\":function($event){_vm.submit(scope.row)}}},[_vm._v(\"Assign\")]):_vm._e()]}}])})],1),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"batchSelected\"}},[_vm._v(\"\\n      \"+_vm._s(_vm.multipleSelection.length)+\" \"+_vm._s(_vm.multipleSelection.length>1?'entries':'entry')+\" selected\\n      \"),_c('el-button',{staticStyle:{\"color\":\"rgb(255, 208, 75)\"},attrs:{\"type\":\"text\"},on:{\"click\":_vm.batchSubmitOpen}},[_vm._v(\"Bulk Allocation\")])],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"background\":\"\",\"current-page\":_vm.currentPage,\"page-sizes\":[10, 20, 50, 100, 200],\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"Confirm\",\"visible\":_vm.dialogVisible,\"width\":\"20%\",\"top\":\"40vh\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('div',{attrs:{\"id\":\"batchModal\"}},[_c('el-select',{attrs:{\"center\":\"\",\"placeholder\":\"please select translator\"},model:{value:(_vm.batch_translate_users_name),callback:function ($$v) {_vm.batch_translate_users_name=$$v},expression:\"batch_translate_users_name\"}},_vm._l((_vm.translators),function(item,index){return _c('el-option',{key:index,attrs:{\"label\":item.name,\"value\":item.name}})}))],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.batchSubmit}},[_vm._v(\"OK\")])],1)])],1)],1)}\nvar staticRenderFns = []\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b1898074\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./resources/assets/js/components/backStage/projectList/AllocationList.vue\n// module id = yhWC\n// module chunks = 11"],"sourceRoot":""}