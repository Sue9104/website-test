webpackJsonp([12],{"0Wi5":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mounted:function(){var e=this;this.addProjectForm.product=this.$route.query.name||"",this.$http.post("/api/user/list").then(function(t){t.data.data.forEach(function(t){t.status="",e.userList.push(t)})})},data:function(){var e=this;return{pickerOptions:{disabledDate:function(e){return e&&e.valueOf()<=Date.now()}},userList:[],addProjectForm:{product:"",attribute:"public",priority:"",deadline:"",lang:"",slang:"",tlang:"",translate_users:[],approve_users:[],viewed_users:[],product_desc:""},rules:{product:[{required:!0,message:"Please enter product."},{validator:function(e,t,r){/^[A-Za-z0-9']{2,20}$|^[\u4e00-\u9fa5.']{2,20}$/.test(t)?t.length<2?r(new Error("Cannot be less than two characters in length.")):t.length>20?r(new Error("Cannot exceed 20 characters in length.")):r():r(new Error("Supports Chinese, English, Number, etc.)"))},trigger:"blur"}],attribute:[{required:!0,message:"Please enter attribute."}],priority:[{required:!0,message:"Please enter priority."}],lang:[{required:!0,message:"Please select language."},{validator:function(t,r,a){""===e.addProjectForm.slang?a(new Error("Please select source language.")):""===e.addProjectForm.tlang?a(new Error("Please select target language.")):e.addProjectForm.slang===e.addProjectForm.tlang?a(new Error("The source language cannot be the same as the target language.")):a()},trigger:"blur"}],deadline:[{required:!0,message:"Please select deadline."}],translate_users:[{required:!0,message:"Please enter translator."}],approve_users:[{required:!0,message:"Please enter approver."}]}}},watch:{"addProjectForm.slang":{handler:function(e,t){this.addProjectForm.lang=this.addProjectForm.slang+"->"+this.addProjectForm.tlang},deep:!0},"addProjectForm.tlang":{handler:function(e,t){this.addProjectForm.lang=this.addProjectForm.slang+"->"+this.addProjectForm.tlang},deep:!0},"addProjectForm.attribute":{handler:function(e,t){"public"===e&&(this.addProjectForm.viewed_users=[])},deep:!0},"addProjectForm.translate_users":{handler:function(e,t){if(e.length>t.length)this.userList.forEach(function(t){e[length-1]===t.id&&(t.status="t")});else{var r=void 0;t.forEach(function(t,a){e.indexOf(t)<0&&(r=t)}),this.userList.forEach(function(e){r===e.id&&(e.status="")})}},deep:!0},"addProjectForm.approve_users":{handler:function(e,t){if(e.length>t.length)this.userList.forEach(function(t){e[length-1]===t.id&&(t.status="a")});else{var r=void 0;t.forEach(function(t,a){e.indexOf(t)<0&&(r=t)}),this.userList.forEach(function(e){r===e.id&&(e.status="")})}},deep:!0},"addProjectForm.viewed_users":{handler:function(e,t){if(e.length>t.length)this.userList.forEach(function(t){e[length-1]===t.id&&(t.status="v")});else{var r=void 0;t.forEach(function(t,a){e.indexOf(t)<0&&(r=t)}),this.userList.forEach(function(e){r===e.id&&(e.status="")})}},deep:!0}},methods:{changeUser:function(e,t){var r=this;switch(e){case"t":t.forEach(function(e){r.userList.forEach(function(t){e===t.id&&(t.status="t")})});break;case"a":t.forEach(function(e){r.userList.forEach(function(t){e===t.id&&(t.status="a")})});break;case"v":t.forEach(function(e){r.userList.forEach(function(t){e===t.id&&(t.status="v")})})}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$notify({title:"Notice",message:"Please check if the form is filled in correctly",type:"warning"}),!1;var r={product:t.addProjectForm.product,attribute:t.addProjectForm.attribute,priority:t.addProjectForm.priority,lang:t.addProjectForm.slang+"->"+t.addProjectForm.tlang,translate_users:JSON.stringify(t.addProjectForm.translate_users),approve_users:JSON.stringify(t.addProjectForm.approve_users),viewed_users:JSON.stringify(t.addProjectForm.viewed_users),deadline:t.addProjectForm.deadline,product_desc:t.addProjectForm.product_desc};t.$http.post("/api/product/create",qs.stringify(r)).then(function(e){setTimeout(function(){t.$router.push("/projectlist")},1500)})})},resetForm:function(e){this.$refs[e].resetFields()}}}},JZsY:function(e,t,r){var a=r("VU/8")(r("0Wi5"),r("mE0b"),!1,function(e){r("OGCx")},"data-v-111b4c3a",null);e.exports=a.exports},OGCx:function(e,t,r){var a=r("xNdN");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("7f0a36b9",a,!0,{})},mE0b:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"addProjectMain"}},[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/projectlist"}}},[e._v("Project List")]),e._v(" "),r("el-breadcrumb-item",[e._v("Add New Project")])],1),e._v(" "),r("div",{staticClass:"clearfix",attrs:{id:"addProjectDetail"}},[r("el-form",{ref:"addProjectForm",attrs:{model:e.addProjectForm,rules:e.rules,"label-position":"left","label-width":"120px"}},[r("el-form-item",{attrs:{prop:"product",label:"Project Name"}},[r("div",{staticClass:"namePwdInp"},[r("el-input",{attrs:{placeholder:"please enter project name"},model:{value:e.addProjectForm.product,callback:function(t){e.$set(e.addProjectForm,"product","string"==typeof t?t.trim():t)},expression:"addProjectForm.product"}})],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"attribute",label:"Attribute"}},[r("div",{staticClass:"namePwdInp"},[r("el-radio-group",{model:{value:e.addProjectForm.attribute,callback:function(t){e.$set(e.addProjectForm,"attribute",t)},expression:"addProjectForm.attribute"}},[r("el-radio",{attrs:{label:"public"}},[e._v("Public")]),e._v(" "),r("el-radio",{attrs:{label:"private"}},[e._v("Private")])],1)],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"priority",label:"Priority"}},[r("div",{staticClass:"namePwdInp"},[r("el-select",{attrs:{placeholder:"please select priority"},model:{value:e.addProjectForm.priority,callback:function(t){e.$set(e.addProjectForm,"priority",t)},expression:"addProjectForm.priority"}},[r("el-option",{attrs:{label:"High",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"Normal",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"Low",value:"1"}})],1)],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"lang",label:"Language"}},[r("div",{staticClass:"namePwdInp"},[r("el-select",{staticStyle:{width:"49%"},attrs:{placeholder:"source language"},model:{value:e.addProjectForm.slang,callback:function(t){e.$set(e.addProjectForm,"slang",t)},expression:"addProjectForm.slang"}},[r("el-option",{attrs:{label:"ZH-CN",value:"ZH-CN"}}),e._v(" "),r("el-option",{attrs:{label:"EN",value:"EN"}})],1),e._v(" "),r("el-select",{staticStyle:{width:"49%"},attrs:{placeholder:"target language"},model:{value:e.addProjectForm.tlang,callback:function(t){e.$set(e.addProjectForm,"tlang",t)},expression:"addProjectForm.tlang"}},[r("el-option",{attrs:{label:"ZH-CN",value:"ZH-CN"}}),e._v(" "),r("el-option",{attrs:{label:"EN",value:"EN"}})],1)],1)]),e._v(" "),r("el-form-item",{attrs:{label:"Deadline",prop:"deadline"}},[r("div",{staticClass:"namePwdInp"},[r("el-date-picker",{attrs:{type:"date","default-value":new Date,"value-format":"yyyy-MM-dd","picker-options":e.pickerOptions,placeholder:"please select deadline"},model:{value:e.addProjectForm.deadline,callback:function(t){e.$set(e.addProjectForm,"deadline","string"==typeof t?t.trim():t)},expression:"addProjectForm.deadline"}})],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"translate_users",label:"Translator"}},[r("div",{staticClass:"namePwdInp"},[r("el-select",{attrs:{placeholder:"please select translator",multiple:""},on:{change:function(t){e.changeUser("t",t)}},model:{value:e.addProjectForm.translate_users,callback:function(t){e.$set(e.addProjectForm,"translate_users",t)},expression:"addProjectForm.translate_users"}},e._l(e.userList,function(t,a){return"t"===t.status||""===t.status?r("el-option",{key:"Translator"+a,attrs:{label:t.name,value:t.id}}):e._e()}))],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"approve_users",label:"Approver"}},[r("div",{staticClass:"namePwdInp"},[r("el-select",{attrs:{placeholder:"please select approver",multiple:""},on:{change:function(t){e.changeUser("a",t)}},model:{value:e.addProjectForm.approve_users,callback:function(t){e.$set(e.addProjectForm,"approve_users",t)},expression:"addProjectForm.approve_users"}},e._l(e.userList,function(t,a){return"a"===t.status||""===t.status?r("el-option",{key:"approver"+a,attrs:{label:t.name,value:t.id}}):e._e()}))],1)]),e._v(" "),r("el-form-item",{attrs:{label:"Viewer"}},[r("div",{staticClass:"namePwdInp"},[r("el-select",{attrs:{placeholder:"please select viewer",multiple:"",disabled:"public"===e.addProjectForm.attribute},on:{change:function(t){e.changeUser("v",t)}},model:{value:e.addProjectForm.viewed_users,callback:function(t){e.$set(e.addProjectForm,"viewed_users",t)},expression:"addProjectForm.viewed_users"}},e._l(e.userList,function(t,a){return"v"===t.status||""===t.status?r("el-option",{key:"Viewer"+a,attrs:{label:t.name,value:t.id}}):e._e()}))],1)]),e._v(" "),r("el-form-item",{attrs:{prop:"product_desc",label:"Description"}},[r("div",{staticClass:"namePwdInp"},[r("el-input",{attrs:{type:"textarea",placeholder:"please enter description of product"},model:{value:e.addProjectForm.product_desc,callback:function(t){e.$set(e.addProjectForm,"product_desc","string"==typeof t?t.trim():t)},expression:"addProjectForm.product_desc"}})],1)]),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("addProjectForm")}}},[e._v("Add")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("addProjectForm")}}},[e._v("Reset")])],1)],1)],1)],1)},staticRenderFns:[]}},xNdN:function(e,t,r){(e.exports=r("FZ+f")(!1)).push([e.i,"",""])}});
//# sourceMappingURL=12.js.map